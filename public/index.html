<!doctype html>
<html>

<head>
    <!-- Page's Title -->
    <title>Chat-Room 1.0</title>

    <!-- Socket.IO client script -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <!-- Usar chat form -->
    <form id="messageForm">
        <label>Send your message bellow: </label>
        <br />
        <textarea rows ="4" cols=50 id="message"></textarea>
        <br />
        <input type="submit" value="Send" />
    </form>
    <br /> <br />

    <!-- Chat -->
    <div id="chat"></div>


    <script>
        $(function(){
            // Connection
            var socket = io.connect();

            // Chatroom variables
            var $messageForm = $('#messageForm');
            var $message = $('#message');
            var $chat = $('#chat');

            // Send the message to Server on 'Send' button clicl
            $messageForm.submit(function(e){
                // Prevent page from refreshing
                e.preventDefault();

                // Send message to the server
                socket.emit('send message' , $message.val());

                // Clear the text textarea
                $message.val('');
            });

            // When receiving a message from the server, append it to the chat div
            socket.on('new message' , function(data){
                $chat.append('<p>' + data + '</p>');
            });
        });
    </script>


</body>


</html>
